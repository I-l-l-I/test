<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>ECharts</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/4.6.0/echarts-en.common.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/4.6.0/echarts-en.min.js"></script>
</head>

<body>
    <!------------------------------->
    <!--环形图-->
    <!------------------------------->
    <div id="ring" style="width:100%;height:800px;"></div>
    <script type="text/javascript">
        var myChart = echarts.init(document.getElementById('ring'));
        function dataJson(data) {
            // console.log(data);
            ringData = data.ringData;
            let keys = [];
            let values = [];
            for (var key in ringData){
                // console.log(key);
                // console.log(ringData[0][key]);
                keys.push(key); // 获取键
                values.push(ringData[key]); // 获取键对应的值
            };
            // console.log(keys)
            max = values[0]; // 取疑似病例即values[0]为最大值
            var dataStyle = {
            normal: {
                label: {
                    show: false
                },
                labelLine: {
                    show: false
                },
                // shadowBlur: 15,
                // shadowColor: 'white',
            }
            };
            var placeHolderStyle = {
            normal: {
                color: 'rgba(0,0,0,0)',
                label: {
                    show: false
                },
                labelLine: {
                    show: false
                }
            },
            emphasis: {
                color: 'rgba(0,0,0,0)'
            }
            };
            option = {
            backgroundColor: '#FFFFFF',
                color: ['#4DFFE3','#4DE0FF','#4DFF8F','#ADFF4D'],
                tooltip : {
                    show: true,
                    formatter: "{b} : {c}"
                },

                legend: {
                    top: "13.5%",
                    x: 'right',
                    left: "42%",
                    itemWidth:0,itemHeight:0,
                    data: ['疑似病例','确诊病例','死亡人数' ,'治愈人数'],
                    itemGap: 50,
                    textStyle: {
                        color: '#000000',
                        align:'right',
                        x: 'right',
                        textAlign:'right'
                    },

                    selectedMode: true,
                    orient: "vertical",

                },
                series: [
                    {
                    name: 'Line 4',
                    type: 'pie',
                    clockWise: true,
                    hoverAnimation: false,
                    radius: ['65%', '75%'],
                    itemStyle: dataStyle,

                data: [{
                    value: values[0],
                    name: keys[0]
                }, {
                    value: max-values[0],
                    name: '总数',
                    tooltip: {
                        show: false
                    },
                    itemStyle: placeHolderStyle
                }

                ]
            }, {
                name: 'Line 3',
                type: 'pie',
                clockWise: true,
                radius: ['50%', '60%'],
                itemStyle: dataStyle,
                hoverAnimation: false,

                data: [{
                    value: values[1],
                    name: keys[1]
                }, {
                    value: max-values[1],
                    name: '总数',
                    tooltip: {
                        show: false
                    },
                    itemStyle: placeHolderStyle
                }]
            }, {
                name: 'Line 2',
                type: 'pie',
                clockWise: true,
                hoverAnimation: false,
                radius: ['35%', '45%'],
                itemStyle: dataStyle,

                        data: [{
                            value: values[2],
                            name: keys[2]
                        }, {
                            value: max-values[2],
                            name: '总数',
                            tooltip: {
                                show: false
                            },
                            itemStyle: placeHolderStyle
                        }]
                    },
                    {
                        name: 'Line 1',
                        type: 'pie',
                        clockWise: true,

                        radius: ['20%', '30%'],
                        itemStyle: dataStyle,
                        hoverAnimation: false,

                        data: [ {
                            value: values[3],
                            name: keys[3]
                        },{
                            value:max-values[3],
                            name: '总数',
                            tooltip: {
                                show: false
                            },
                            itemStyle: placeHolderStyle
                        }

                        ]
                    }
                ]
            };
            myChart.setOption(option);
        };
    </script>
    <script type="text/javascript" src="./example.json?cb=dataJson"></script>
</body>

</html>
