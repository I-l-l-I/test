<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>ECharts</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/4.6.0/echarts-en.common.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/4.6.0/echarts-en.min.js"></script>
</head>

<body>
    <!------------------------------->
    <!--双向图-->
    <!------------------------------->
    <div id="arrow" style="width:100%;height:800px;"></div>
    <script type="text/javascript">
        function dataJson(data) {
            arrowData = data.arrowData;
            var myChart = echarts.init(document.getElementById('arrow'));
                var dataStyle = {
        normal: {
            label: {
                show: false
            },
            labelLine: {
                show: false
            },
            // shadowBlur: 15,
            // shadowColor: 'white',
        }
    };
            let keys = [];
            for (var key in arrowData[0]){
                keys.push(key);  //这块返回的话是长度
            };
            let myData = [];
            let datadie = [];
            let datacure = [];
            let totalday = 0;
            for (let i in arrowData){
                myData.push(arrowData[i][keys[0]]);
                datadie.push(arrowData[i][keys[1]]);
                datacure.push(arrowData[i][keys[2]]);
                totalday++
            };

console.log(totalday)
option = {
    baseOption: {
        backgroundColor: '#FFFFFF',
        timeline: {
            show: false,
            axisType: 'category',
            autoPlay: false,
            currentIndex: 6,
            playInterval: 3000000,
            data: [],
        },
        title: {
            textStyle: {
                color: '#000000',
                fontSize: 16,
            }
        },
        legend: {
            data: ['全国死亡人数', '全国治愈人数'],
            top: 4,
            right: '20%',
            textStyle: {
                color: '#000000',
            },
        },
        grid: [{
            show: false,
            left: '4%',
            top: 60,
            bottom: 60,
            containLabel: true,
            width: '40%',
        }, {
            show: false,
            left: '50.5%',
            top: 80,
            bottom: 60,
            width: '0%',
        }, {
            show: false,
            right: '4%',
            top: 60,
            bottom: 60,
            containLabel: true,
            width: '40%',
        }, ],

        xAxis: [
            {
            type: 'value',
            inverse: true,
            axisLine: {
                show: false,
            },
            axisTick: {
                show: false,
            },
            position: 'top',
            axisLabel: {
                show: true,
                textStyle: {
                    color: '#B2B2B2',
                    fontSize: 12,
                },
            },
            splitLine: {
                show: true,
                lineStyle: {
                    color: '#778899',
                    width: 1,
                    type: 'solid',
                },
            },
        }, {
            gridIndex: 1,
            show: false,
        }, {
            gridIndex: 2,
            type: 'value',
            axisLine: {
                show: false,
            },
            axisTick: {
                show: false,
            },
            position: 'top',
            axisLabel: {
                show: true,
                textStyle: {
                    color: '#B2B2B2',
                    fontSize: 12,
                },
            },
            splitLine: {
                show: true,
                lineStyle: {
                    color: '#778899',
                    width: 1,
                    type: 'solid',
                },
            },
        }, ],
        yAxis: [{
            type: 'category',
            inverse: true,
            position: 'right',
            axisLine: {
                show: false
            },
            axisTick: {
                show: false
            },
            axisLabel: {
                show: false,
                margin: 8,
                textStyle: {
                    color: '#000000',
                    fontSize: 12,
                },

            },
            data: myData,
        }, {
            gridIndex: 1,
            type: 'category',
            inverse: true,
            position: 'left',
            axisLine: {
                show: false
            },
            axisTick: {
                show: false
            },
            axisLabel: {
                show: true,
                textStyle: {
                    color: '#000000',
                    fontSize: 12,
                },

            },
            data: myData.map(function(value) {
                return {
                    value: value,
                    textStyle: {
                        align: 'center',
                    }
                }
            }),
        }, {
            gridIndex: 2,
            type: 'category',
            inverse: true,
            position: 'left',
            axisLine: {
                show: false
            },
            axisTick: {
                show: false
            },
            axisLabel: {
                show: false,
                textStyle: {
                    color: '#9D9EA0',
                    fontSize: 12,
                },

            },
            data: myData,
        }, ],
        series: [],

    },

    options: [],


};
times = (datacure[totalday-1]+datadie[totalday-1])/50;
for (var i = 0; i < times; i++) {
    option.options.push({
        title: {
            text: '全国死亡人数与治愈人数统计',
        },
        series: [{
                name: '全国死亡人数',
                type: 'bar',
                barGap: 20,
                barWidth: 20,
                label: {
                    normal: {
                        show: false,
                    },
                    emphasis: {
                        show: true,
                        position: 'left',
                        offset: [0, 0],
                        textStyle: {
                            color: '#000000',
                            fontSize: 14,
                        },
                    },
                },
                itemStyle: {
                    normal: {
                        color: '#659F83',
                    },
                    emphasis: {
                        color: '#08C7AE',
                    },
                },
                data: datadie,
            },


            {
                name: '全国治愈人数',
                type: 'bar',
                barGap: 20,
                barWidth: 20,
                xAxisIndex: 2,
                yAxisIndex: 2,
                label: {
                    normal: {
                        show: false,
                    },
                    emphasis: {
                        show: true,
                        position: 'right',
                        offset: [0, 0],
                        textStyle: {
                            color: '#000000',
                            fontSize: 14,
                        },
                    },
                },
                itemStyle: {
                    normal: {
                        color: '#F68989',
                    },
                    emphasis: {
                        color: '#F94646',
                    },
                },
                data: datacure,
            }
        ]
    });
};

myChart.setOption(option);
}
    </script>
    <script type="text/javascript" src="./example.json?cb=dataJson"></script>
</body>

</html>
