<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>ECharts</title>
    <script src="https://cdn.staticfile.org/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/4.6.0/echarts-en.common.js"></script></head>

<body>
    <!------------------------------->
    <!--矩形树图-->
    <!------------------------------->
    <div id="tritreemap" style="width:100%;height:800px;"></div>
    <h1>图2</h1>
    <div id="bar" style="width:100%;height:800px;"></div>
    <h1>坐标轴缩放确诊折线图</h1>
    <div id="line" style="width:100%;height:800px;"></div>
    <script type="text/javascript">
        var example = [];
        var myChart = echarts.init(document.getElementById('tritreemap'));
            
        function dataJson(data) {
            console.log(data);
            example = data;
            // 先获取列名，和日期
            // var date =[];
            let keys2 = [];
            for (var key in example[0]){
                // console.log(key);//得到键
                // console.log(example[0][key]);//得到键对应的值
                keys2.push(key);  //这块返回的话是长度
            };
            console.log(keys2)

            // 还需要获取一下日期2020-1-30
            let items2 = [];
            for (let i in example) {
                    items2.push(example[i][keys2[0]]);
            };
            console.log(items2)

            // !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!应该用处挺大的！！！！！！！splice() 方法向/从数组中添加/删除项目，然后返回被删除的项目。
            var year = [];
            year.name = keys2.splice(0, 1);  //意思就是从第0个对象开始删除一项，剩下除了月份的后4个名字，返回的是删除的项目，所以说折线图的x轴名字是月份，现在keys只剩下除了月份的后4个名字   
            console.log(keys2)
            // 所以现在keys2是 211 985 其他

            // 处理主体数据
            let datas2 = [];
            for (let i in keys2) {
                        let one = {};       // 一组
                        one.name = keys2[i]; // 名称
                        one.type = 'line';  // 图表类型
                        one.smooth = true;  // 平滑的线
                        one.symbolSize=8;
                        one.symbol= 'circle';
                        let point = [];     // 记录这一组的所有点
                        for (let idx in example) {
                            // 把这组的点push到数组中
                            point.push(example[idx][one.name]);
                        }
                        one.data = point;
                        // 把这组数据添加到主体数据中
                        datas2.push(one)
            };

            option = {
                                backgroundColor: "#a73e5c", //#a73e5c
                                color: ['#ffd285', '#ff733f', '#ec4863'],

                                title: [{
                                    text: '2019-nCoV 新型冠状病毒疫情传播预测(2020.1.30)',
                                    left: '1%',
                                    top: '6%',
                                    textStyle: {
                                        color: '#ffd285'
                                    }
                                }],
                                tooltip: {
                                    trigger: 'axis'
                                },
                                legend: {
                                    x: 300,
                                    top: '10%',
                                    textStyle: {
                                        color: '#ffd285',
                                    },
                                    data: keys2
                                },
                                grid: {
                                    left: '1%',
                                    right: '35%',
                                    top: '16%',
                                    bottom: '6%',
                                    containLabel: true
                                },
                                toolbox: {
                                    "show": false,
                                    feature: {
                                        saveAsImage: {}
                                    }
                                },
                                xAxis: {
                                    type: 'category',
                                    "axisLine": {
                                        lineStyle: {
                                            color: '#FF4500'
                                        }
                                    },
                                    "axisTick": {
                                        "show": false
                                    },
                                    axisLabel: {
                                        textStyle: {
                                            color: '#fff'
                                        }
                                    },
                                    boundaryGap: false,
                                    data: items2
                                },
                                yAxis: {
                                    "axisLine": {
                                        lineStyle: {
                                            color: '#fff'
                                        }
                                    },
                                    splitLine: {
                                        show: true,
                                        lineStyle: {
                                            color: '#fff'
                                        }
                                    },
                                    "axisTick": {
                                        "show": false
                                    },
                                    axisLabel: {
                                        textStyle: {
                                            color: '#fff'
                                        }
                                    },
                                    type: 'value'
                                },
                                series:datas2
            };
                myChart.setOption(option);
        
        }
    </script>
    
    <script type="text/javascript" src="./example.json?cb=dataJson"></script>
    
</body>

</html>
